= Entr

== 简介

通过标准输入提供一个文件列表，如果有任何文件发生改变，则此工具根据提供的参数执行相应的命令。
**entr** 在等待子进程结束后才会响应后继的文件系统事件。
在进入监视循环之前终端会保持开启，以支持交互式命令。

其参数如下：

-a:: 响应工具运行期间的所有事件。
没有此选项， **entr** 会对事件进行合并以避免死循环发生。
此选项与 **-r** 一起使用时无效。

-c:: 在调用命令行上指定的命令前，执行 `/usr/bin/clear`

-d:: 监视作为输入参数的普通文件所在的文件夹，并且如果有新文件添加则退出。
此选项也支持明确指定目录。
`.` 开头的文件将被乎略

-n:: 以无交互模式运行下。
在此模式下entr不会尝试读取终端，或更改自身属性。

-p:: 推迟指定指令的首次执行，直到文件被修改。

-r:: 重载一个持久子进程。
就像标准操作模式一样，直到一个文件系统或键盘时间处理完之前，终止的命令不会再次执行。
`SIGTERM` 用来在命令重启前终止该命令。
创建了一个进程组以防止 `shell` 脚本屏蔽信号。
**entr** 等待执行的命令退出，来确保如sockets例等资源已被关闭。
TTY的控制权不会转移到子进程。

-s:: 使用 `SHELL` 环境变量执行第一个参数
如果标准输出是终端，shell的名称及退出状态码将在每次调用后输出。

-z:: 当命令执行完毕时退出。
当与 `-r` 选项一起使用时命令仅在响应命令或文件系统时重启。

第一个命名为 `/_` 的参数将被触发时间的第一个文件的绝对路径替换。
默认使用观测到的第一个文件。
如果使用了 `-s` 选项，触发事件的第一个文件的文件名可以通过 `$0` 读取。

== 命令
**entr** 监听键盘输入并响应以下命令：

⟨space⟩::  立即执行命令。
如果设置了 `-r` 选项那么 **entr** 将会象文件发生改变一样终止并重启子进程。

q::        退出; 相当于按下 ⟨control-C⟩.
